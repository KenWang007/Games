<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
  <meta name="description" content="一款专为儿童设计的卡通风格俄罗斯方块游戏">
  <meta name="theme-color" content="#4FC3F7">
  <!-- 锁定竖屏 -->
  <meta name="screen-orientation" content="portrait">
  <meta name="x5-orientation" content="portrait">
  <title>🎮 卡通俄罗斯方块 - 儿童版</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
  <style>
    /* 移动端隐藏的元素 */
    #mobile-controls,
    #mobile-status-bar {
      display: none;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <!-- 移动端顶部状态栏 -->
    <div id="mobile-status-bar">
      <div class="status-item">
        <span>分数</span>
        <span class="status-value" id="mobile-score">0</span>
      </div>
      <div class="status-item">
        <span>等级</span>
        <span class="status-value" id="mobile-level">1</span>
      </div>
      <div class="status-item">
        <span>行数</span>
        <span class="status-value" id="mobile-lines">0</span>
      </div>
    </div>
    
    <!-- 左侧面板区域 -->
    <div id="left-panel">
      <!-- 第1行：下一个方块预览 -->
      <div id="next-piece" class="panel">
        <span class="panel-label">下一个</span>
        <canvas id="preview-canvas" width="80" height="80"></canvas>
      </div>
      
      <!-- 第2行：当前难度显示（弹性填充） -->
      <div id="difficulty-panel" class="panel">
        <span class="panel-label">难度</span>
        <div id="current-difficulty" class="current-difficulty">
          <span id="current-diff-icon" class="diff-icon">⭐</span>
          <span id="current-diff-name" class="diff-name">普通</span>
        </div>
      </div>
      
      <!-- 第3行：空占位（与右侧最高分对齐） -->
      <div class="panel panel-spacer"></div>
      
      <!-- 第4行：空占位（与右侧消除行数对齐） -->
      <div class="panel panel-spacer"></div>
    </div>
    
    <!-- 中间游戏区域 -->
    <div id="game-canvas-wrapper">
      <canvas id="bg-canvas" aria-hidden="true"></canvas>
      <canvas id="game-canvas" aria-label="俄罗斯方块游戏区域"></canvas>
      <canvas id="fx-canvas" aria-hidden="true"></canvas>
    </div>
    
    <!-- 右侧面板区域 -->
    <div id="right-panel">
      <!-- 分数 -->
      <div id="score-panel" class="panel">
        <span class="panel-label">分数</span>
        <span id="score" class="stat-value">0</span>
      </div>
      
      <!-- 等级 -->
      <div id="level-panel" class="panel">
        <span class="panel-label">等级</span>
        <div id="level" class="level-display">
          <span id="level-icon" class="level-icon">🐣</span>
          <span id="level-name" class="level-name">新手蛋蛋</span>
        </div>
      </div>
      
      <!-- 最高分 -->
      <div id="highscore-panel" class="panel">
        <span class="panel-label">最高分</span>
        <span id="high-score" class="stat-value highlight">0</span>
      </div>
      
      <!-- 消除行数 -->
      <div id="lines-panel" class="panel">
        <span class="panel-label">消除行数</span>
        <span id="lines-cleared" class="stat-value">0</span>
      </div>
    </div>
    
    <!-- 底部控制按钮 -->
    <div id="controls">
      <button id="btn-start" class="btn btn-primary">
        <span class="btn-icon">🎮</span>
        <span class="btn-text">开始游戏</span>
      </button>
      <button id="btn-pause" class="btn btn-secondary" hidden>
        <span class="btn-icon">⏸️</span>
        <span class="btn-text">暂停</span>
      </button>
      <button id="btn-sound" class="btn btn-icon-only" title="音效开关">
        🔊
      </button>
      <button id="btn-music" class="btn btn-icon-only" title="音乐开关">
        🎵
      </button>
    </div>
    
    <!-- 移动端触摸控制按钮 -->
    <div id="mobile-controls">
      <button class="control-btn rotate" data-action="rotate" title="旋转">🔄</button>
      <button class="control-btn left" data-action="left" title="左移">⬅️</button>
      <button class="control-btn down" data-action="down" title="下移">⬇️</button>
      <button class="control-btn right" data-action="right" title="右移">➡️</button>
      <button class="control-btn drop" data-action="drop" title="直接落下">⚡ 快速下落</button>
    </div>
    
    <!-- UI层（用于模态框） -->
    <div id="ui-layer">
    
    <!-- 开始界面 -->
    <div id="start-screen" class="modal">
      <div class="modal-content">
        <h1 class="game-title">🎮 卡通俄罗斯方块</h1>
        <p class="game-subtitle">专为小朋友设计的趣味游戏</p>
        
        <!-- 难度选择（在开始界面中） -->
        <div class="difficulty-section">
          <h3>选择难度</h3>
          <div id="difficulty-selector-modal" class="difficulty-selector-large">
            <button class="difficulty-btn-large" data-difficulty="easy" title="简单 - 适合初学者">
              <span class="diff-icon-large">🌱</span>
              <span class="diff-name-large">简单</span>
              <span class="diff-desc">速度较慢</span>
            </button>
            <button class="difficulty-btn-large active" data-difficulty="normal" title="普通 - 标准难度">
              <span class="diff-icon-large">⭐</span>
              <span class="diff-name-large">普通</span>
              <span class="diff-desc">标准速度</span>
            </button>
            <button class="difficulty-btn-large" data-difficulty="hard" title="困难 - 挑战高手">
              <span class="diff-icon-large">🔥</span>
              <span class="diff-name-large">困难</span>
              <span class="diff-desc">速度更快</span>
            </button>
          </div>
        </div>
        
        <div class="instructions">
          <h3>操作说明</h3>
          <div class="instruction-grid">
            <div class="instruction-item">
              <span class="key">←→</span>
              <span>左右移动</span>
            </div>
            <div class="instruction-item">
              <span class="key">↑</span>
              <span>旋转方块</span>
            </div>
            <div class="instruction-item">
              <span class="key">↓</span>
              <span>短按下移/长按直落</span>
            </div>
            <div class="instruction-item">
              <span class="key">空格</span>
              <span>直接落下</span>
            </div>
          </div>
        </div>
        <button id="btn-play" class="btn btn-large btn-primary">
          <span class="btn-icon">▶️</span>
          <span class="btn-text">开始游戏</span>
        </button>
      </div>
    </div>
    
    <!-- 暂停菜单 -->
    <div id="pause-menu" class="modal" hidden>
      <div class="modal-content">
        <h2 class="modal-title">⏸️ 游戏暂停</h2>
        <div class="modal-buttons">
          <button id="btn-resume" class="btn btn-primary">
            <span class="btn-icon">▶️</span>
            <span class="btn-text">继续游戏</span>
          </button>
          <button id="btn-restart" class="btn btn-secondary">
            <span class="btn-icon">🔄</span>
            <span class="btn-text">重新开始</span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- 游戏结束界面 -->
    <div id="game-over" class="modal" hidden>
      <div class="modal-content">
        <h2 id="game-over-title" class="modal-title">游戏结束</h2>
        <div id="new-record-badge" class="new-record-badge" hidden>
          🎉 新纪录！
        </div>
        <div class="game-over-stats">
          <div class="stat-row">
            <span class="stat-label">最终得分</span>
            <span id="final-score" class="stat-value large">0</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">达到等级</span>
            <span id="final-level" class="stat-value">1</span>
          </div>
          <div class="stat-row">
            <span class="stat-label">消除行数</span>
            <span id="final-lines" class="stat-value">0</span>
          </div>
        </div>
        <div class="modal-buttons">
          <button id="btn-play-again" class="btn btn-large btn-primary">
            <span class="btn-icon">🔄</span>
            <span class="btn-text">再玩一次</span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- 新纪录提示（游戏中） -->
    <div id="record-toast" class="toast" hidden>
      🎉 新纪录！
    </div>
  </div>
  
  <script type="module" src="js/main.js"></script>
</body>
</html>

